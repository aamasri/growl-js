{"version":3,"sources":["webpack:///./src/dom-utils.js"],"names":["$window","jQuery","window","isVisible","el","$el","first","get","$","css","rect","getBoundingClientRect","top","left","bottom","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","positionVisible","$obj","offset","scroll","scrollLeft","scrollTop","outerWidth","height","outerHeight","zIndexRange","highestZ","lowestZ","elements","getElementsByTagName","i","length","zIndex","getZIndex","highest","lowest","element","recursive","getComputedStyle","parseInt","getPropertyValue","currentStyle","parentNode","async","webpSupport","self","createImageBitmap","blob","fetch","then","r","screenResolution","pixelDensity"],"mappings":"8JAAA,6gBAAMA,QAAUC,OAAOC,QAIhB,SAASC,UAAUC,IACzB,IAAIC,IAQJ,GAPID,GAAGE,SACND,IAAMD,GACNA,GAAKA,GAAGG,IAAI,IAEZF,IAAMG,EAAEJ,IAGkB,SAAvBC,IAAII,IAAI,YAAmD,WAA1BJ,IAAII,IAAI,gBAA+BJ,IAAII,IAAI,WACnF,OAAO,EAEP,MAAMC,KAAON,GAAGO,wBAChB,OACED,KAAKE,KAAO,GACZF,KAAKG,MAAQ,GACbH,KAAKI,SAAWZ,OAAOa,aAAeC,SAAUC,gBAAgBC,eAChER,KAAKS,QAAUjB,OAAOkB,YAAcJ,SAAUC,gBAAgBI,aAQ3D,SAASC,gBAAgBC,MAC/B,MAAMC,OAASD,KAAKC,SACdC,OAAS,GAEfA,OAAOZ,KAAOb,QAAQ0B,aACtBD,OAAOb,IAAMZ,QAAQ2B,YAErB,MAAMd,KAAOW,OAAOX,KAAOY,OAAOZ,KAC5BD,IAAMY,OAAOZ,IAAMa,OAAOb,IAIhC,MAAO,CAAEA,IAAIA,IAAKO,MAHJnB,QAAQ4B,aAAef,KAAOU,KAAKK,aAGlBd,OAFhBd,QAAQ6B,SAAWjB,IAAMW,KAAKO,cAECjB,KAAKA,MAU7C,SAASkB,cACf,IAAIC,SAAW,EACXC,QAAU,EACd,MAAMC,SAAWlB,SAASmB,qBAAqB,KAE/C,IAAK,IAAIC,EAAI,EAAGA,EAAIF,SAASG,OAAQD,IAAK,CACzC,IAAIE,OAASC,UAAUL,SAASE,IAE5BE,SACCA,OAASN,SACZA,SAAWM,OACHA,OAASL,UACjBA,QAAUK,SAIb,MAAO,CAAEE,QAASR,SAAUS,OAAQR,SAcrC,SAASM,UAAUG,QAASC,WAC3B,IAAIL,OAUJ,OARIpC,OAAO0C,iBACVN,OAASO,SAAS3C,OAAO0C,iBAAiBF,QAAQ,MAAMI,iBAAiB,YAEjEJ,QAAQK,eAChBT,OAASO,SAASH,QAAQK,aAAaT,SAExCA,OAASA,QAAU,EAEXK,WAAwB,IAAXL,OAAgBC,UAAUG,QAAQM,YAAY,GAAQV,OAQrEW,eAAeC,cACrB,IAAKC,KAAKC,kBAAmB,OAAO,EAEpC,MACMC,WAAaC,MADF,+EACkBC,KAAKC,GAAKA,EAAEH,QAC/C,OAAOD,kBAAkBC,MAAME,KAAK,KAAM,EAAM,KAAM,GAUhD,SAASE,mBACf,MAAMC,aAAexD,OAAO0B,WAAa1B,OAAO4B,YAShD,OAAI4B,aAAe,KACX,KAECA,aAAe,IAChB,MAED,O","file":"chunk_dom-utils.js","sourcesContent":["const $window = jQuery(window);\n\n\n//is the element visible (css display/visibility/opacity and viewport scroll position)\nexport function isVisible(el) {\n\tlet $el;\n\tif (el.first()) {  //test is jquery collection\n\t\t$el = el;\n\t\tel = el.get(0)\n\t} else\n\t\t$el = $(el);\n\n\t//is object hidden\n\tif ($el.css('display') === 'none' || $el.css('visibility') === 'hidden' || !$el.css('opacity'))\n\t\treturn false;\n\n  const rect = el.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document. documentElement.clientHeight) && /*or $window.height() */\n    rect.right <= (window.innerWidth || document. documentElement.clientWidth) /*or $window.width() */\n  )\n}\n\n\n\n\n//takes a jQuery object and returns the offset from the visible viewport\nexport function positionVisible($obj) {\n\tconst offset = $obj.offset();\n\tconst scroll = {};\n\n\tscroll.left = $window.scrollLeft();\n\tscroll.top = $window.scrollTop();\n\n\tconst left = offset.left - scroll.left;\n\tconst top = offset.top - scroll.top;\n\tconst right = $window.outerWidth() - left - $obj.outerWidth();\n\tconst bottom = $window.height() - top - $obj.outerHeight();\n\n\treturn { top:top, right:right, bottom:bottom, left:left };\n}\n\n\n\n\n/* Get the min/max z-indices of the document.\n *\n * @returns {Object}\n */\nexport function zIndexRange() {\n\tlet highestZ = 0;\n\tlet lowestZ = 0;\n\tconst elements = document.getElementsByTagName('*');\n\n\tfor (let i = 0; i < elements.length; i++) {\n\t\tlet zIndex = getZIndex(elements[i]);\n\n\t\tif (zIndex) {\n\t\t\tif (zIndex > highestZ)\n\t\t\t\thighestZ = zIndex;\n\t\t\telse if (zIndex < lowestZ)\n\t\t\t\tlowestZ = zIndex;\n\t\t}\n\t}\n\n\treturn { highest: highestZ, lowest: lowestZ };\n}\n\n\n\n\n\n/* Get the z-index of the the specified element.\n * The recursive option will\n *\n * @param {Element} element\n * @param { boolean | undefined } [recursive=undefined] - whether to traverse parents in search of z-index\n * @returns {number} - the z-index\n */\nfunction getZIndex(element, recursive) {\n\tlet zIndex;\n\n\tif (window.getComputedStyle)\t// modern browsers\n\t\tzIndex = parseInt(window.getComputedStyle(element,null).getPropertyValue('z-Index'));\n\n\telse if (element.currentStyle)\t// old browsers\n\t\tzIndex = parseInt(element.currentStyle.zIndex);\n\n\tzIndex = zIndex || 0;\n\n\treturn (recursive && zIndex === 0) ? getZIndex(element.parentNode, true) : zIndex;\n}\n\n\n\n\n\n// reliably detects browser webp image support\nexport async function webpSupport() {\n\tif (!self.createImageBitmap) return false;\n\n\tconst webpData = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=';\n\tconst blob = await fetch(webpData).then(r => r.blob());\n\treturn createImageBitmap(blob).then(() => true, () => false);\n}\n\n\n\n\n/* For determining the image resolution required\n *\n * @returns {string} - lo|med|hi\n */\nexport function screenResolution() {\n\tconst pixelDensity = window.outerWidth * window.outerHeight;\n\t// iPhone SE:  320 x 568\t 182k\tlo\n\t// iPhone 8:   375 x 667     250k   lo\n\t// iPhone 8+:  414 x 736     305k   lo\n\t// iPad\":      768 x 1024    786k   med\n\t// iPad Pro+:  1024 x 1365   1.4M   med\n\t// my desktop: 1024 x 1920   2M     hi\n\t// my 4k:      3200 x 1800   5.8M   hi\n\n\tif (pixelDensity > 1500000)\n\t\treturn 'hi';\n\n\telse if (pixelDensity > 500000)\n\t\treturn 'med';\n\n\treturn 'lo';\n}"],"sourceRoot":""}